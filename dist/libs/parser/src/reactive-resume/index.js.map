{"version":3,"sources":["../../../../../libs/parser/src/reactive-resume/index.ts"],"sourcesContent":["import { ResumeData, resumeDataSchema } from \"@reactive-resume/schema\";\r\nimport { Json } from \"@reactive-resume/utils\";\r\nimport { Schema } from \"zod\";\r\n\r\nimport { Parser } from \"../interfaces/parser\";\r\n\r\nexport class ReactiveResumeParser implements Parser<Json, ResumeData> {\r\n  schema: Schema;\r\n\r\n  constructor() {\r\n    this.schema = resumeDataSchema;\r\n  }\r\n\r\n  readFile(file: File): Promise<Json> {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = () => {\r\n        try {\r\n          const result = JSON.parse(reader.result as string) as Json;\r\n          resolve(result);\r\n        } catch (error) {\r\n          reject(new Error(\"Failed to parse JSON\"));\r\n        }\r\n      };\r\n\r\n      reader.onerror = () => {\r\n        reject(new Error(\"Failed to read the file\"));\r\n      };\r\n\r\n      reader.readAsText(file);\r\n    });\r\n  }\r\n\r\n  validate(data: Json) {\r\n    return this.schema.parse(data) as ResumeData;\r\n  }\r\n\r\n  convert(data: ResumeData) {\r\n    return data;\r\n  }\r\n}\r\n"],"names":["ReactiveResumeParser","readFile","file","Promise","resolve","reject","reader","FileReader","onload","result","JSON","parse","error","Error","onerror","readAsText","validate","data","schema","convert","constructor","resumeDataSchema"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBANgC;AAMtC,IAAA,AAAMA,uBAAN,MAAMA;IAOXC,SAASC,IAAU,EAAiB;QAClC,OAAO,IAAIC,QAAQ,CAACC,SAASC;YAC3B,MAAMC,SAAS,IAAIC;YAEnBD,OAAOE,MAAM,GAAG;gBACd,IAAI;oBACF,MAAMC,SAASC,KAAKC,KAAK,CAACL,OAAOG,MAAM;oBACvCL,QAAQK;gBACV,EAAE,OAAOG,OAAO;oBACdP,OAAO,IAAIQ,MAAM;gBACnB;YACF;YAEAP,OAAOQ,OAAO,GAAG;gBACfT,OAAO,IAAIQ,MAAM;YACnB;YAEAP,OAAOS,UAAU,CAACb;QACpB;IACF;IAEAc,SAASC,IAAU,EAAE;QACnB,OAAO,IAAI,CAACC,MAAM,CAACP,KAAK,CAACM;IAC3B;IAEAE,QAAQF,IAAgB,EAAE;QACxB,OAAOA;IACT;IA/BAG,aAAc;QACZ,IAAI,CAACF,MAAM,GAAGG,wBAAgB;IAChC;AA8BF"}