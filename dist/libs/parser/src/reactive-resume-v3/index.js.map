{"version":3,"sources":["../../../../../libs/parser/src/reactive-resume-v3/index.ts"],"sourcesContent":["import { createId } from \"@paralleldrive/cuid2\";\r\nimport {\r\n  defaultAward,\r\n  defaultCertification,\r\n  defaultEducation,\r\n  defaultExperience,\r\n  defaultInterest,\r\n  defaultLanguage,\r\n  defaultProfile,\r\n  defaultProject,\r\n  defaultPublication,\r\n  defaultReference,\r\n  defaultResumeData,\r\n  defaultSkill,\r\n  defaultVolunteer,\r\n  ResumeData,\r\n} from \"@reactive-resume/schema\";\r\nimport { isUrl, Json } from \"@reactive-resume/utils\";\r\nimport { Schema } from \"zod\";\r\n\r\nimport { Parser } from \"../interfaces/parser\";\r\nimport { ReactiveResumeV3, reactiveResumeV3Schema } from \"./schema\";\r\n\r\nexport * from \"./schema\";\r\n\r\nexport class ReactiveResumeV3Parser implements Parser<Json, ReactiveResumeV3> {\r\n  schema: Schema;\r\n\r\n  constructor() {\r\n    this.schema = reactiveResumeV3Schema;\r\n  }\r\n\r\n  readFile(file: File): Promise<Json> {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = () => {\r\n        try {\r\n          const result = JSON.parse(reader.result as string) as Json;\r\n          resolve(result);\r\n        } catch (error) {\r\n          reject(new Error(\"Failed to parse JSON\"));\r\n        }\r\n      };\r\n\r\n      reader.onerror = () => {\r\n        reject(new Error(\"Failed to read the file\"));\r\n      };\r\n\r\n      reader.readAsText(file);\r\n    });\r\n  }\r\n\r\n  validate(data: Json) {\r\n    return this.schema.parse(data) as ReactiveResumeV3;\r\n  }\r\n\r\n  convert(data: ReactiveResumeV3) {\r\n    const result = JSON.parse(JSON.stringify(defaultResumeData)) as ResumeData;\r\n\r\n    // Basics\r\n    result.basics.name = data.basics.name ?? \"\";\r\n    result.basics.email = data.basics.email;\r\n    result.basics.phone = data.basics.phone ?? \"\";\r\n    result.basics.headline = data.basics.headline ?? \"\";\r\n    result.basics.location = data.basics.location.address ?? \"\";\r\n    result.sections.summary.content =\r\n      (typeof data.basics.summary === \"string\" ? data.basics.summary : data.basics.summary?.body) ??\r\n      \"\";\r\n    result.basics.picture.url = isUrl(data.basics.photo.url) ? data.basics.photo.url! : \"\";\r\n\r\n    // Profiles\r\n    if (data.basics.profiles) {\r\n      for (const profile of data.basics.profiles) {\r\n        result.sections.profiles.items.push({\r\n          ...defaultProfile,\r\n          id: createId(),\r\n          network: profile.network ?? \"\",\r\n          username: profile.username ?? \"\",\r\n          icon: (profile.network ?? \"\").toLocaleLowerCase(),\r\n          url: { ...defaultProfile.url, href: isUrl(profile.url) ? profile.url! : \"\" },\r\n        });\r\n      }\r\n    }\r\n\r\n    // Work\r\n    if (data.sections.work.items) {\r\n      for (const work of data.sections.work.items) {\r\n        if (!work) continue;\r\n\r\n        result.sections.experience.items.push({\r\n          ...defaultExperience,\r\n          id: createId(),\r\n          company: work.name ?? \"\",\r\n          position: work.position ?? \"\",\r\n          summary: work.summary ?? \"\",\r\n          date: `${work.date?.start} - ${work.date?.end}`,\r\n          url: { ...defaultExperience.url, href: isUrl(work.url) ? work.url! : \"\" },\r\n        });\r\n      }\r\n    }\r\n\r\n    // Awards\r\n    if (data.sections.awards.items) {\r\n      for (const award of data.sections.awards.items) {\r\n        if (!award) continue;\r\n\r\n        result.sections.awards.items.push({\r\n          ...defaultAward,\r\n          id: createId(),\r\n          title: award.title ?? \"\",\r\n          awarder: award.awarder ?? \"\",\r\n          date: award.date ?? \"\",\r\n          summary: award.summary ?? \"\",\r\n          url: { ...defaultAward.url, href: isUrl(award.url) ? award.url! : \"\" },\r\n        });\r\n      }\r\n    }\r\n\r\n    // Skills\r\n    if (data.sections.skills.items) {\r\n      for (const skill of data.sections.skills.items) {\r\n        if (!skill) continue;\r\n\r\n        result.sections.skills.items.push({\r\n          ...defaultSkill,\r\n          id: createId(),\r\n          name: skill.name ?? \"\",\r\n          level: Math.floor(skill.levelNum / 2),\r\n          description: skill.level ?? \"\",\r\n          keywords: Array.isArray(skill.keywords)\r\n            ? (skill.keywords.filter(Boolean) as string[])\r\n            : [],\r\n        });\r\n      }\r\n    }\r\n\r\n    // Projects\r\n    if (data.sections.projects.items) {\r\n      for (const project of data.sections.projects.items) {\r\n        if (!project) continue;\r\n\r\n        result.sections.projects.items.push({\r\n          ...defaultProject,\r\n          id: createId(),\r\n          name: project.name ?? \"\",\r\n          summary: project.summary ?? \"\",\r\n          description: project.description ?? \"\",\r\n          date: `${project.date?.start} - ${project.date?.end}`,\r\n          keywords: Array.isArray(project.keywords)\r\n            ? (project.keywords.filter(Boolean) as string[])\r\n            : [],\r\n          url: { ...defaultProject.url, href: isUrl(project.url) ? project.url! : \"\" },\r\n        });\r\n      }\r\n    }\r\n\r\n    // Education\r\n    if (data.sections.education.items) {\r\n      for (const education of data.sections.education.items) {\r\n        if (!education) continue;\r\n\r\n        result.sections.education.items.push({\r\n          ...defaultEducation,\r\n          id: createId(),\r\n          institution: education.institution ?? \"\",\r\n          studyType: education.degree ?? \"\",\r\n          area: education.area ?? \"\",\r\n          score: education.score ?? \"\",\r\n          summary: education.summary ?? \"\",\r\n          date: `${education.date?.start} - ${education.date?.end}`,\r\n          url: { ...defaultEducation.url, href: isUrl(education.url) ? education.url! : \"\" },\r\n        });\r\n      }\r\n    }\r\n\r\n    // Interests\r\n    if (data.sections.interests.items) {\r\n      for (const interest of data.sections.interests.items) {\r\n        if (!interest) continue;\r\n\r\n        result.sections.interests.items.push({\r\n          ...defaultInterest,\r\n          id: createId(),\r\n          name: interest.name ?? \"\",\r\n          keywords: Array.isArray(interest.keywords)\r\n            ? (interest.keywords.filter(Boolean) as string[])\r\n            : [],\r\n        });\r\n      }\r\n    }\r\n\r\n    // Languages\r\n    if (data.sections.languages.items) {\r\n      for (const language of data.sections.languages.items) {\r\n        if (!language) continue;\r\n\r\n        result.sections.languages.items.push({\r\n          ...defaultLanguage,\r\n          id: createId(),\r\n          name: language.name ?? \"\",\r\n          description: language.level ?? \"\",\r\n          level: Math.floor(language.levelNum / 2),\r\n        });\r\n      }\r\n    }\r\n\r\n    // Volunteer\r\n    if (data.sections.volunteer.items) {\r\n      for (const volunteer of data.sections.volunteer.items) {\r\n        if (!volunteer) continue;\r\n\r\n        result.sections.volunteer.items.push({\r\n          ...defaultVolunteer,\r\n          id: createId(),\r\n          organization: volunteer.organization ?? \"\",\r\n          position: volunteer.position ?? \"\",\r\n          summary: volunteer.summary ?? \"\",\r\n          date: `${volunteer.date?.start} - ${volunteer.date?.end}`,\r\n          url: { ...defaultVolunteer.url, href: isUrl(volunteer.url) ? volunteer.url! : \"\" },\r\n        });\r\n      }\r\n    }\r\n\r\n    // References\r\n    if (data.sections.references.items) {\r\n      for (const reference of data.sections.references.items) {\r\n        if (!reference) continue;\r\n\r\n        result.sections.references.items.push({\r\n          ...defaultReference,\r\n          id: createId(),\r\n          name: reference.name ?? \"\",\r\n          summary: reference.summary ?? \"\",\r\n          description: reference.relationship ?? \"\",\r\n        });\r\n      }\r\n    }\r\n\r\n    // Publications\r\n    if (data.sections.publications.items) {\r\n      for (const publication of data.sections.publications.items) {\r\n        if (!publication) continue;\r\n\r\n        result.sections.publications.items.push({\r\n          ...defaultPublication,\r\n          id: createId(),\r\n          name: publication.name ?? \"\",\r\n          summary: publication.summary ?? \"\",\r\n          date: publication.date ?? \"\",\r\n          url: { ...defaultPublication.url, href: isUrl(publication.url) ? publication.url! : \"\" },\r\n        });\r\n      }\r\n    }\r\n\r\n    // Certifications\r\n    if (data.sections.certifications.items) {\r\n      for (const certification of data.sections.certifications.items) {\r\n        if (!certification) continue;\r\n\r\n        result.sections.certifications.items.push({\r\n          ...defaultCertification,\r\n          id: createId(),\r\n          name: certification.name ?? \"\",\r\n          issuer: certification.issuer ?? \"\",\r\n          summary: certification.summary ?? \"\",\r\n          date: certification.date ?? \"\",\r\n          url: {\r\n            ...defaultCertification.url,\r\n            href: isUrl(certification.url) ? certification.url! : \"\",\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n"],"names":["ReactiveResumeV3Parser","readFile","file","Promise","resolve","reject","reader","FileReader","onload","result","JSON","parse","error","Error","onerror","readAsText","validate","data","schema","convert","stringify","defaultResumeData","basics","name","email","phone","headline","location","address","sections","summary","content","body","picture","url","isUrl","photo","profiles","profile","items","push","defaultProfile","id","createId","network","username","icon","toLocaleLowerCase","href","work","experience","defaultExperience","company","position","date","start","end","awards","award","defaultAward","title","awarder","skills","skill","defaultSkill","level","Math","floor","levelNum","description","keywords","Array","isArray","filter","Boolean","projects","project","defaultProject","education","defaultEducation","institution","studyType","degree","area","score","interests","interest","defaultInterest","languages","language","defaultLanguage","volunteer","defaultVolunteer","organization","references","reference","defaultReference","relationship","publications","publication","defaultPublication","certifications","certification","defaultCertification","issuer","constructor","reactiveResumeV3Schema"],"mappings":"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"}