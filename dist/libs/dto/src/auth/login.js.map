{"version":3,"sources":["../../../../../libs/dto/src/auth/login.ts"],"sourcesContent":["import { createZodDto } from \"nestjs-zod/dto\";\r\nimport { z } from \"nestjs-zod/z\";\r\n\r\nimport { usernameSchema } from \"../user\";\r\n\r\nexport const loginSchema = z\r\n  .object({\r\n    identifier: z.string(),\r\n    password: z.password().min(6),\r\n  })\r\n  .refine(\r\n    (value) => {\r\n      if (value.identifier.includes(\"@\")) {\r\n        return z.string().email().parse(value.identifier);\r\n      } else {\r\n        return usernameSchema.parse(value.identifier);\r\n      }\r\n    },\r\n    { message: \"InvalidCredentials\" },\r\n  );\r\n\r\nexport class LoginDto extends createZodDto(loginSchema) {}\r\n"],"names":["LoginDto","loginSchema","z","object","identifier","string","password","min","refine","value","includes","email","parse","usernameSchema","message","createZodDto"],"mappings":";;;;;;;;;;;IAqBaA,QAAQ;eAARA;;IAhBAC,WAAW;eAAXA;;;qBALgB;mBACX;sBAEa;AAExB,MAAMA,cAAcC,IAAC,CACzBC,MAAM,CAAC;IACNC,YAAYF,IAAC,CAACG,MAAM;IACpBC,UAAUJ,IAAC,CAACI,QAAQ,GAAGC,GAAG,CAAC;AAC7B,GACCC,MAAM,CACL,CAACC;IACC,IAAIA,MAAML,UAAU,CAACM,QAAQ,CAAC,MAAM;QAClC,OAAOR,IAAC,CAACG,MAAM,GAAGM,KAAK,GAAGC,KAAK,CAACH,MAAML,UAAU;IAClD,OAAO;QACL,OAAOS,oBAAc,CAACD,KAAK,CAACH,MAAML,UAAU;IAC9C;AACF,GACA;IAAEU,SAAS;AAAqB;AAG7B,IAAA,AAAMd,WAAN,MAAMA,iBAAiBe,IAAAA,iBAAY,EAACd;AAAc"}